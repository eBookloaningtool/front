import{_ as S,u as T,r as d,a as U,c as o,o as r,b as m,d as A,w as C,e as s,t as M,f as h,v as k,n as L,g as E,h as B,i as $,j,k as q,l as D}from"./index-CkN-Mn1m.js";const G={class:"login-form-container py-4"},H={key:0,class:"success-message"},J={key:0,class:"bg-red-50 border-l-4 border-red-400 text-red-700 p-4 rounded-md mb-5 transition-all duration-300",role:"alert"},K={class:"flex"},O={class:"ml-3"},Q={class:"text-sm"},W={class:"form-group"},X={key:0,class:"text-red-500 text-xs mt-1"},Y={class:"form-group"},Z={key:0,class:"text-red-500 text-xs mt-1"},ee=["disabled"],se={key:0},te={key:1},ae={class:"text-center mt-6"},le={key:2,class:"forget-password-modal"},oe={class:"modal-container"},re={class:"modal-body"},ne={class:"flex"},ie={class:"flex-shrink-0"},de={key:0,class:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ue={key:1,class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ve={class:"ml-3"},ce={class:"text-sm"},ge={class:"form-group mb-8"},me={class:"modal-footer"},pe=["disabled"],fe=["disabled"],we={key:0},xe={key:1},ye={__name:"LoginForm",emits:["login-success"],setup(z,{emit:y}){B();const b=T(),P=y,t=d(""),v=d(""),u=d(""),p=d(!1),F=d(!1),f=d(!1),c=d(""),g=d(!1),i=d({text:"",type:""}),l=U({email:{focused:!1,valid:!0},password:{focused:!1,valid:!0}}),w=(a,e)=>{l[a].focused=e},V=()=>{let a=!0;return t.value?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)?l.email.valid=!0:(l.email.valid=!1,u.value="Please enter a valid email address",a=!1):(l.email.valid=!1,u.value="Please enter your email address",a=!1),v.value?l.password.valid=!0:(a&&(u.value="Please enter your password"),l.password.valid=!1,a=!1),a},x=a=>{if(a==="email"&&t.value){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;l.email.valid=e.test(t.value)}a==="password"&&(l.password.valid=v.value.length>0)},R=()=>{t.value&&l.email.valid?c.value=t.value:c.value="",f.value=!0,i.value={text:"",type:""}},_=()=>{f.value=!1,g.value=!1},N=async()=>{try{if(g.value=!0,i.value={text:"",type:""},!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.value)){i.value={text:"Please enter a valid email address",type:"error"};return}const e=await E.forgetPassword({email:c.value});e.data.state==="success"?(i.value={text:"The password reset link has been sent to your email",type:"success"},setTimeout(()=>{f.value=!1},2e3)):i.value={text:e.data.message||"Failed to send the password reset link",type:"error"}}catch(a){console.error("Forget password error:",a),i.value={text:"An error occurred while sending the password reset link",type:"error"}}finally{g.value=!1}},I=async()=>{try{if(u.value="",!V())return;p.value=!0;const a={email:t.value,password:v.value},e=await b.login(a);e.state==="success"?(F.value=!0,setTimeout(()=>{P("login-success")},1e3)):u.value=e.message||"Login failed, please check your email and password"}catch(a){console.error("Login error:",a),u.value="Login failed, please try again later"}finally{p.value=!1}};return(a,e)=>(r(),o("div",G,[F.value?(r(),o("div",H,e[9]||(e[9]=[A('<div class="success-icon" data-v-db39d12e><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-500 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-v-db39d12e><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-db39d12e></path></svg></div><h3 class="text-xl font-semibold text-center text-gray-800 mt-4" data-v-db39d12e>Login Successful!</h3><p class="text-center text-gray-600 mt-2" data-v-db39d12e>Redirecting to home page...</p>',3)]))):(r(),o("form",{key:1,onSubmit:C(I,["prevent"]),class:"space-y-7"},[u.value?(r(),o("div",J,[s("div",K,[e[10]||(e[10]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),s("div",O,[s("p",Q,M(u.value),1)])])])):m("",!0),s("div",W,[h(s("input",{id:"email","onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),type:"email",class:L(["w-full px-6 py-4 bg-gray-100 border-none rounded-lg transition-colors text-base",[l.email.focused?"ring-2 ring-blue-200":"",l.email.valid?"":"ring-2 ring-red-200"]]),placeholder:"Username/Email",required:"",onFocus:e[1]||(e[1]=n=>w("email",!0)),onBlur:e[2]||(e[2]=n=>{w("email",!1),x("email")}),onInput:e[3]||(e[3]=n=>x("email"))},null,34),[[k,t.value]]),l.email.valid?m("",!0):(r(),o("div",X," Please enter a valid email address "))]),s("div",Y,[h(s("input",{id:"password","onUpdate:modelValue":e[4]||(e[4]=n=>v.value=n),type:"password",class:L(["w-full px-6 py-4 bg-gray-100 border-none rounded-lg transition-colors text-base",[l.password.focused?"ring-2 ring-blue-200":"",l.password.valid?"":"ring-2 ring-red-200"]]),placeholder:"Password",required:"",onFocus:e[5]||(e[5]=n=>w("password",!0)),onBlur:e[6]||(e[6]=n=>{w("password",!1),x("password")}),onInput:e[7]||(e[7]=n=>x("password"))},null,34),[[k,v.value]]),l.password.valid?m("",!0):(r(),o("div",Z," Please enter your password "))]),s("button",{type:"submit",class:"login-btn w-full py-4 px-4 text-white font-medium rounded-lg transition-all duration-200 text-base shadow-md hover:shadow-lg",disabled:p.value},[p.value?(r(),o("span",se,"Logging in...")):(r(),o("span",te,"Login"))],8,ee),s("div",ae,[s("a",{href:"#",onClick:C(R,["prevent"]),class:"text-gray-600 hover:text-gray-800 text-base"}," Forgot Password? ")])],32)),f.value?(r(),o("div",le,[s("div",{class:"modal-overlay",onClick:_}),s("div",oe,[s("div",{class:"modal-header"},[e[12]||(e[12]=s("h3",{class:"text-xl font-semibold text-gray-800"},"Forgot Password",-1)),s("button",{class:"close-button",onClick:_},e[11]||(e[11]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))]),s("div",re,[e[16]||(e[16]=s("p",{class:"text-gray-600 mb-6 text-base"},"Please enter your email address and we'll send you a new password.",-1)),i.value.text?(r(),o("div",{key:0,class:L(["message-alert mb-4",i.value.type==="success"?"success-alert":"error-alert"])},[s("div",ne,[s("div",ie,[i.value.type==="success"?(r(),o("svg",de,e[13]||(e[13]=[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):(r(),o("svg",ue,e[14]||(e[14]=[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])))]),s("div",ve,[s("p",ce,M(i.value.text),1)])])],2)):m("",!0),s("div",ge,[e[15]||(e[15]=s("label",{for:"forget-email",class:"block text-base font-medium text-gray-700 mb-2"},"Email Address",-1)),h(s("input",{id:"forget-email","onUpdate:modelValue":e[8]||(e[8]=n=>c.value=n),type:"email",class:"w-full px-6 py-4 bg-gray-100 border-none rounded-lg transition-colors text-base",placeholder:"Please enter your email",required:""},null,512),[[k,c.value]])])]),s("div",me,[s("button",{class:"cancel-button",onClick:_,disabled:g.value}," Cancel ",8,pe),s("button",{class:"submit-button",onClick:N,disabled:g.value},[g.value?(r(),o("span",we,"Processing...")):(r(),o("span",xe,"Send A New Password"))],8,fe)])])])):m("",!0)]))}},be=S(ye,[["__scopeId","data-v-db39d12e"]]),_e={class:"login-page min-h-screen flex flex-col items-center justify-center bg-blur"},he={class:"login-container relative z-10"},ke={class:"tab-container text-center mb-10"},Le={class:"tab"},Pe={__name:"LoginPage",setup(z){const y=B(),b=()=>{y.push("/")};return(P,t)=>{const v=q("router-link");return r(),o("div",_e,[t[3]||(t[3]=s("div",{class:"overlay"},null,-1)),s("div",he,[t[2]||(t[2]=s("div",{class:"text-center mb-12"},[s("h1",{class:"text-3xl font-extrabold text-gray-800"},"BorrowBee")],-1)),s("div",ke,[t[1]||(t[1]=s("span",{class:"tab active"},"Log in",-1)),s("span",Le,[$(v,{to:"/register",class:"text-gray-500 hover:text-gray-700"},{default:j(()=>t[0]||(t[0]=[D(" Register ")])),_:1})])]),$(be,{onLoginSuccess:b})])])}}},Ce=S(Pe,[["__scopeId","data-v-fa46ed48"]]);export{Ce as default};
